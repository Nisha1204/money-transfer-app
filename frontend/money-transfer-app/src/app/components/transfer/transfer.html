<div class="card">
  <h2>Money Transfer</h2>

  <form [formGroup]="transferForm" (ngSubmit)="onTransfer()">
    
    <label>Select Source Account</label>
    <select 
      formControlName="fromAccountId" 
      (change)="onAccountSelect($any($event.target).value)">
      <option value="" disabled>-- Select Account --</option>
      <option *ngFor="let acc of accounts" [value]="acc.id">
        Account ID: {{acc.id}} (Balance: {{acc.balance | currency}})
      </option>
    </select>

    <hr/>
    
    <div class="group">
      <label>From Account ID (Confirmed)</label>
      <input type="number" formControlName="fromAccountId" readonly class="readonly-input">
    </div>

    <div class="group">
      <label>To Account ID</label>
      <input type="number" formControlName="toAccountId" (blur)="validateToAccount()">
    </div>

    <div class="group">
      <label>Amount</label>
      <input type="number" formControlName="amount" placeholder="0.00">
    </div>

    <button type="submit" [disabled]="transferForm.invalid || loading || !toAccountValid">
      {{ loading ? 'Processing...' : 'Send Money' }}
    </button>
  </form>

  <p *ngIf="message" [ngClass]="isError ? 'error-text' : 'success-text'" style="margin-top: 10px; font-weight: bold;">
    {{ message }}
  </p>
</div>

<div class="button-group" style="display: flex; gap: 10px; margin-top: 15px;">
  <button type="button" class="btn-secondary" (click)="clearForm()" [disabled]="loading">
    Clear Form
  </button>
</div>